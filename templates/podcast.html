{% extends "base.html" %}

{% block title %}Podcast | BuNker11{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/podcast.css') }}">
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='scripts/lite-yt-embed.js') }}" type="module"></script>
{% endblock %}

{% block content %}
<section class="podcast-section">
    <h1>TOT Presents Worthing Podcast</h1>

    <div class="recent-video">
        {% if podcast_url %}
            {% set video_id = podcast_url.split('v=')[-1].split('&')[0] if 'v=' in podcast_url else podcast_url.split('/')[-1] %}
                <lite-youtube
                    videoid="{{ video_id }}"
                    style="--ytimg: url('https://i.ytimg.com/vi/{{ video_id }}/sddefault.jpg');"
                    data-title="">
                    <img
                        src="https://i.ytimg.com/vi/{{ video_id }}/sddefault.jpg"
                        alt="Latest Podcast Video"
                        fetchpriority="high"
                        decoding="async"
                        width="640"
                        height="360"
                        style="display: none;">
                    <noscript>
                        <a href="https://www.youtube.com/watch?v={{ video_id }}">Watch on YouTube</a>
                    </noscript>
                </lite-youtube>
            {% else %}
                <lite-youtube
                    videoid="-3KvXitcFkk"
                    style="--ytimg: url('https://i.ytimg.com/vi/-3KvXitcFkk/sddefault.jpg');"
                    data-title="">
                    <img
                        src="https://i.ytimg.com/vi/-3KvXitcFkk/sddefault.jpg"
                        alt="Latest Podcast Video"
                        fetchpriority="high"
                        decoding="async"
                        width="640"
                        height="360"
                        style="display: none;">
                    <noscript>
                        <a href="https://www.youtube.com/watch?v=-3KvXitcFkk">Watch on YouTube</a>
                    </noscript>
                </lite-youtube>
            {% endif %}

    </div>

    <div class="subscribe-container">
        <a href="https://www.youtube.com/channel/{{ youtube_channel_id }}?sub_confirmation=1" target="_blank" class="subscribe-button">
            Subscribe to TOT Presents Worthing Podcast
        </a>
    </div>

    <div class="video-gallery">
        {% for video in recent_videos %}
        <a href="https://www.youtube.com/watch?v={{ video.id }}" target="_blank" class="video-thumb" title="{{ video.title }}">
            <img src="{{ video.thumbnail }}" alt="{{ video.title }}" loading="lazy">
            <span class="video-title">{{ video.title }}</span>
        </a>
        {% endfor %}
    </div>
</section>
{% endblock %}
